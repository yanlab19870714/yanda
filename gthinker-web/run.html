<!DOCTYPE html>
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>G-thinker</title>

<link rel="stylesheet" id="bootstrap-css-css" href="lib/bootstrap.css" type="text/css" media="all">
<link rel="stylesheet" id="frontend_main-css-css" href="lib/frontend_main.css" type="text/css" media="all">
<link rel="stylesheet" id="social-icons-widget-widget-css" href="lib/social_icons_widget.css" type="text/css" media="all">
<link rel="stylesheet" id="twentysixteen-fonts-css" href="lib/css" type="text/css" media="all">
<link rel="stylesheet" id="genericons-css" href="lib/genericons.css" type="text/css" media="all">
<link rel="stylesheet" id="twentysixteen-style-css" href="lib/style.css" type="text/css" media="all">
<link rel="stylesheet" href="lib/prism.css" type="text/css" media="all">

<script type="text/javascript" src="lib/jquery.js"></script>
<script type="text/javascript" src="lib/jquery-migrate.min.js"></script>
<script type="text/javascript" src="lib/js"></script>
<script type="text/javascript" src="lib/init_map.js"></script>
<script type="text/javascript" src="lib/frontend_main.js"></script>
<script type="text/javascript" src="lib/prism.js"></script>

<style type="text/css" id="wp-custom-css">

.icdeparagraph {
text-align: justify;
}

.site-title {
  text-align: center;
  margin-left: 30px;
  vertical-align: top;
  display: inline;
}

span.site-title {
   margin-left: 0px;
}

div.site-branding {
  margin-bottom: 0px !important;
}

.custom-logo-link {
  display: inline;
}

p.site-title a {
 font-size: 2.5rem !important;
 font-weight: bold;
}

a[href="https://wordpress.org/"]{ visibility: hidden; }

div.header-image {
 margin-top: 0px !important;
}

#masthead {
 padding-bottom: 37px !important;
}

div.site-info {
 width: 385px;
 overflow: hidden;
 height: 25px;
}

#vicechairs {
  width: 100%;
  border: 0px;
}

#vicechairs tbody tr td {
  border: 0px;
}

#vicechairs thead tr th {
  vertical-align: middle;
  text-align: center;
}

#hotels {
  width: 100%;
  text-align: center;
}

#thhotelsname {
  width: 40%;
}

#hotels thead tr th {
  vertical-align: middle;
  text-align: center;
}

#hotels tbody tr td {
  text-align: center;
  vertical-align: middle;
}
ul, ol{
  padding-left: 20px !important;
}

table.sightseeing {
  border: none;
}

table.sightseeing tr{
  border: none;
}

table.sightseeing tr td {
  border: none;
}


table.sightseeing tbody tr td{
  text-align: center;
}

#colophon .site-info {
  min-width: 370px;
}

ul.importantdates {
list-style-type: none;
}

#researchpc {
  width: 100%;
  border: 0px;
}


#researchpc tbody tr td{
  border: 0px;
}

#researchpc tbody tr td:nth-child(1) {
  width: 35%;
}

#researchpc tbody tr td:nth-child(2) {
  width: 65%;
}

.site-description {
    margin-left: 160px; 
    margin-top: -25px;
    margin-bottom: 10px;
}

p.site-description {
	font-size: 1.25rem;
}

#twitter-follow-3 { 
  margin-bottom: 5px;
}

#text-11 {
 margin-bottom: 15px;
}

.twitter-timeline-profile {
  max-height: 225px !important;
  overflow: scroll;
}

/* Portrait tablet to landscape and desktop */
@media (min-width: 768px) and (max-width: 1280px) {    
  p.site-title a {
   font-size: 2.5rem !important;
   font-weight: normal;
 }
}

/* Landscape phone to portrait tablet */
@media (max-width: 800px) { 
   .site-description {
      display: none;
    }
}

/* Landscape phones and down */
@media (max-width: 480px) { 
 
}

del{
color : red;
font-weight: bold;
}

.organizers{
margin-top: 0px;
margin-bottom: 25px;
}

h5 {
margin-bottom: 0px !important;
}

h6 {
	margin-bottom:5px !important;
	font-style: normal !important;
	line-height: 175% !important;
}

a.btn {
    display: inline-block;
    font-weight: bold;
    width: auto;
    color: #fff;
    background-color: #02A99C;
    cursor: pointer;
    padding: 10px 20px;
    transition: ease all 0.5s;
}

a.btn:hover, a.btn:focus {
    background: #FCB027;
    border: none;
}

</style>

<script type="text/javascript" charset="utf-8" async="" src="lib/button.5f64a1a5864e1229f84c8defd65341b4.js"></script><script type="text/javascript" charset="utf-8" async="" src="lib/timeline.25e3f797ea5047ab5a8d06fd6ee7f701.js"></script><script type="text/javascript" charset="UTF-8" src="lib/common.js"></script><script type="text/javascript" charset="UTF-8" src="lib/util.js"></script><script type="text/javascript" charset="UTF-8" src="lib/stats.js"></script></head>

<body class="home page-template-default page page-id-30 page-parent wp-custom-logo" data-gr-c-s-loaded="true">
<div id="page" class="site">
	<div class="site-inner">

<header id="masthead" class="site-header" role="banner">
	<div class="site-header-main">
		<div class="site-branding">
			<a href="index.html" class="custom-logo-link" rel="home" itemprop="url"><img width="120" src="img/logo.png" class="custom-logo" alt="G-thinker" itemprop="logo"></a>
				<p class="site-title"><a href="index.html" rel="home">Think Like a Subgraph</a></p>
				<p class="site-description">A User-Friendly Parallel Graph Mining System</a></p>
		</div><!-- .site-branding -->

<button id="menu-toggle" class="menu-toggle">Menu</button>

<div id="site-header-menu" class="site-header-menu">
<nav id="site-navigation" class="main-navigation" role="navigation" aria-label="Primary Menu">
<div class="menu-main-container"><ul id="menu-main" class="primary-menu">

<li id="menu-item-33" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home current-menu-item page_item page-item-30 current_page_item menu-item-has-children menu-item-33" aria-haspopup="true"><a href="index.html">Home</a><button class="dropdown-toggle" aria-expanded="false"><span class="screen-reader-text">expand child menu</span></button>

<ul class="sub-menu">
  <li id="menu-item-36" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-35"><a href="index.html">G-thinker Home</a></li>
</ul>
</li>

<li id="menu-item-173" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-173" aria-haspopup="true"><a href="system.html">Downloads</a><button class="dropdown-toggle" aria-expanded="false"><span class="screen-reader-text">expand child menu</span></button>

<ul class="sub-menu">
	<li id="menu-item-173" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-173"><a href="system.html">System Code</a></li>
	<li id="menu-item-174" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-174"><a href="toy.html">Datasets</a></li>
	<li id="menu-item-176" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-176"><a href="app.html">Application Code</a></li>
</ul>
</li>

<li id="menu-item-52" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-52" aria-haspopup="true"><a href="deploy.html">Doumentation</a><button class="dropdown-toggle" aria-expanded="false"><span class="screen-reader-text">expand child menu</span></button>

<ul class="sub-menu">
	<li id="menu-item-163" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-163"><a href="deploy.html">How to Deploy</a></li>
	<li id="menu-item-164" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-164"><a href="run.html">How to Run</a></li>
	<li id="menu-item-166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-166"><a href="manual.html">How to Program</a></li>
  <li id="menu-item-166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-166"><a href="api.html">The Complete API</a></li>
</ul>
</li>

<li id="menu-item-52" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-62" aria-haspopup="true"><a href="team.html">Team &amp; Contact</a><button class="dropdown-toggle" aria-expanded="false"><span class="screen-reader-text">expand child menu</span></button>

<ul class="sub-menu">
	<li id="menu-item-63" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-63"><a href="team.html">Core Team</a></li>
	<li id="menu-item-64" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-64"><a href="others.html">Other Contributors</a></li>
</ul>
</li>

</ul></div>

</nav><!-- .main-navigation -->
</div><!-- .site-header-menu -->
</div><!-- .site-header-main -->

</header><!-- .site-header -->




<div id="content" class="site-content">
<div id="primary" class="content-area">
<main id="main" class="site-main" role="main">
		
<article id="post-30" class="post-30 page type-page status-publish hentry">

<header class="entry-header"><h1 class="entry-title">Running a G-thinker Application</h1></header><!-- .entry-header -->

<div class="entry-content">

<p class="icdeparagraph">
Other Documentations: [<a href="deploy.html">How to Deploy</a>], [<a href="manual.html">How to Program</a>], [<a href="api.html">The Complete API</a>]
</p>

<p class="icdeparagraph">
This tutorial introduces how to run a G-thinker program in your cluster, where we assume:
<ul>
  <li>You have already deployed G-thinker according to the <a href="deploy.html" target="_blank">deployment note</a>.</li>
  <li>You have already downloaded G-thinker according to <a href="system.html" target="_blank">here</a>, and we denote the G-thinker root folder as $GTHINKER_HOME in the rest of the tutorial.</li>
</ul>
</p>

<h3>Put Data on HDFS</h3>

<p class="icdeparagraph">
G-thinker requires that a large graph data is partitioned into smaller files under the same data folder on HDFS, and these files are loaded by different computing processes during processing.
</p>

<p class="icdeparagraph">
To achieve this goal, we <font color="red"><b>cannot</b></font> simply use the command <b>hadoop fs -put {local-file} {HDFS-path}</b>. Otherwise, all the data file will be loaded by only one computing process, and the other processes simply wait for it to finish loading.
</p>

<p class="icdeparagraph">
To put a large graph data onto HDFS, one needs to use our <b><font color="red">put</font></b> program, which can be obtained as follows:
</p>

<pre><code class="language-bash">wget http://www.cs.uab.edu/yanda/gthinker/doc/put.zip
unzip put.zip
cd put
make    # generate a program called "run"
mv run put    # rename it to "put"
</code></pre>

<p class="icdeparagraph">
Now, the "put" program is ready for use, which takes two arguments being {local-file} {HDFS-path}. Let us put our unlabeled toy graph described <a href="toy.html" target="_blank">here</a> to HDFS:
</p>

<pre><code class="language-bash">wget http://www.cs.uab.edu/yanda/gthinker/doc/unlabeled.txt
hadoop fs -mkdir /toyFolder
hadoop fs -put unlabeled.txt /toyFolder
hadoop fs -cat /toyFolder/*
</code></pre>

<p class="icdeparagraph">
You may move the "put" program to $HOME, so that you can call it as "~/put" anywhere.
</p>

<pre><code class="language-bash">mv put ~
</code></pre>

<h3>Compiling and Running</h3>

<p class="icdeparagraph">
We illustrate the process with the application <i>Maximum Clique Finding</i>. 
</p>

<p class="icdeparagraph">
Now, change the current directory to $GTHINKER_HOME/app_maxclique. There is already a Makefile, and thus you can run <b>make</b> to compile it, which will generate a program called <b>run</b>, with two input arguments {HDFS-input-path} and {number-of-threads}.
</p>

<p class="icdeparagraph">
For example, you can run it on your machine using 4 threads as follows, where the input graph is the toy graph we just put on HDFS.
</p>

<pre><code class="language-bash">./run /toyFolder 4
</code></pre>

<h3>Running with Multiple Machines</h3>
<p class="icdeparagraph">
G-thinker is just a library of header files using MPI, and thus a G-thinker program is simply an MPI program.
MPI requires that our compiled program be transmitted to every machine, under the same path. For example, we can move the previously compiled program <b>run</b> to $HOME, and then transmit it to every machine as follows (assuming that we are currently on <b>master</b>).
</p>

<pre><code class="language-bash">mv run ~    # ~ is equivalent to $HOME
cd ~
scp run slave1:~
scp run slave2:~
...
scp run slaveN:~
</code></pre>

<p class="icdeparagraph">
Moreover, to run an MPI program on multiple machines, you need to indicate the list of hosts you want to run with. We now prepare a host-file named <b>hosts</b> listing the hostnames of those machines that we would like to run with, such as:
</p>

<pre><code class="language-markup">master
slave1
slave2
...
slaveN
</code></pre>

<p class="icdeparagraph">
Now, you may run the program with <b>mpiexec</b>, whose option <b>-n</b> indicates how many processes you want to run, and option <b>-f</b> specifies the hostfile.
</p>

<pre><code class="language-bash">mpiexec -n N+1 -f hosts ./run /toyFolder 4
# 4 threads per process/machine
</code></pre>

<p class="icdeparagraph">
Processes are distributed to machines in your hostfile in a round-robin manner, and we recommend you to run <b>one</b> process on each machine, and to adjust the <b>number of threads</b> to fully utilize your multi-core machines.
</p>

<h3>Task Buffer on Local Disk</h3>

<p class="icdeparagraph">
In G-thinker, if a task is growing its subgraph by pulling vertices from remote machines, the task will be hanged up when waiting for responses.
</p>

<p class="icdeparagraph">
When responses are received, these tasks will be waken up for processing, and if they need further processing such as pulling more vertices, they are added to an in-memory task queue waiting to be fetched by a core for computation.
</p>

<p class="icdeparagraph">
To keep memory consumption low, G-thinker limits the number of tasks allowed in a task queue. If a burst of tasks are processed and need to be added to the task queue, but the task queue is full, then we move 1/3 of the tasks to local disks in order to add more tasks to the task queue. 
</p>

<p class="icdeparagraph">
The tasks buffered on disks are stored in a folder specified by <a href="https://github.com/yanlab19870714/G-thinker/blob/master/system/util/global.h" target="_blank">$GTHINKER_HOME/system/util/global.h</a> Line 173 the variable:
</p>

<pre><code class="language-cpp">string TASK_DISK_BUFFER_DIR;
</code></pre>

<p class="icdeparagraph">
The default path is a folder named <b>buffered_tasks</b> in the current path that you run your G-thinker program, but can be changed by providing a 2nd input argument to the <a href="https://github.com/yanlab19870714/G-thinker/blob/master/system/subgraph/Worker.h" target="_blank">Worker</a> class (see Lines 95 and 98).
</p>

<p class="icdeparagraph">
It is recommended to set TASK_DISK_BUFFER_DIR towards a path on local disk rather than an NFS (Network File System), since otherwise, the disk arm of the NFS is shared by all machines.
</p>

<p class="icdeparagraph">
The buffered tasks will be loaded back to the task queue as soon as the queue underflows (i.e., 1/3 or less of the full capacity).
</p>

</div><!-- .entry-content -->

</article><!-- #post-## -->

</main><!-- .site-main -->
</div><!-- .content-area -->



<aside id="secondary" class="sidebar widget-area" role="complementary">

<section id="text-12" class="widget widget_text">
<h2 class="widget-title">Quick Links</h2>
<div class="textwidget">
<h4>
<p><a href="system.html" target="_blank">Downloads</a></p>
<p><a href="run.html">How to Run</a></p>
<p><a href="manual.html">How to Program</a></p>
<p><a href="api.html">The Complete API</a></p>
<p><a href="team.html" target="_blank">Contact Us</a></p>
</h4>
</div>
</section>

<section id="text-12" class="widget widget_text">
<h2 class="widget-title">Sponsors</h2>
<div class="textwidget">
<h4>
<input type="image" width="120" src="img/nsf.png" style="cursor:pointer" onMouseover= "this.style.opacity=0.6" onMouseout= "this.style.opacity=1" onclick ="window.open('https://nsf.gov/awardsearch/showAward?AWD_ID=1755464&HistoricalAwards=false')"/>
<p></p>
<input type="image" width="180" src="img/azure.png" style="cursor:pointer" onMouseover= "this.style.opacity=0.6" onMouseout= "this.style.opacity=1" onclick ="window.open('https://www.microsoft.com/en-us/research/academic-program/azure-research-award-south-bd-hub/')"/>
<p></p>
<input type="image" width="260" src="img/south.png" style="cursor:pointer" onMouseover= "this.style.opacity=0.6" onMouseout= "this.style.opacity=1" onclick ="window.open('https://southbdhub.wordpress.com/2017/12/04/south-hub-microsoft-team-up-to-provide-azure-credits-for-researchers/')"/>
</h4>
</div>
</section>

</aside><!-- .sidebar .widget-area -->
</div><!-- .site-content -->


<footer id="colophon" class="site-footer" role="contentinfo">
<nav class="main-navigation" role="navigation" aria-label="Footer Primary Menu">

<div class="menu-main-container">
<ul id="menu-main-1" class="primary-menu">

<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home current-menu-item page_item page-item-30 current_page_item menu-item-has-children menu-item-33" aria-haspopup="true"><a href="index.html">Home</a><button class="dropdown-toggle" aria-expanded="false"><span class="screen-reader-text">expand child menu</span></button>

<ul class="sub-menu">
  <li id="menu-item-36" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-35"><a href="index.html">G-thinker Home</a></li>
</ul>
</li>

<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-52" aria-haspopup="true"><a href="system.html">Downloads</a><button class="dropdown-toggle" aria-expanded="false"><span class="screen-reader-text">expand child menu</span></button>

<ul class="sub-menu">
	<li id="menu-item-173" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-173"><a href="system.html">System Code</a></li>
  <li id="menu-item-174" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-174"><a href="toy.html">Datasets</a></li>
  <li id="menu-item-176" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-176"><a href="app.html">Application Code</a></li>
</ul>
</li>

<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-160" aria-haspopup="true"><a href="deploy.html">Doumentation</a><button class="dropdown-toggle" aria-expanded="false"><span class="screen-reader-text">expand child menu</span></button>

<ul class="sub-menu">
	<li id="menu-item-163" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-163"><a href="deploy.html">How to Deploy</a></li>
  <li id="menu-item-164" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-164"><a href="run.html">How to Run</a></li>
  <li id="menu-item-166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-166"><a href="manual.html">How to Program</a></li>
  <li id="menu-item-166" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-166"><a href="api.html">The Complete API</a></li>
</ul>
</li>

<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-173" aria-haspopup="true"><a href="team.html">Team &amp; Contact</a><button class="dropdown-toggle" aria-expanded="false"><span class="screen-reader-text">expand child menu</span></button>
<ul class="sub-menu">
	<li id="menu-item-63" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-63"><a href="team.html">Core Team</a></li>
  <li id="menu-item-64" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-64"><a href="others.html">Other Contributors</a></li>
</ul>
</li>

</ul></div>
</nav><!-- .main-navigation -->
			
			
<div class="site-info">
	<span class="site-title"><a href="index.html" rel="home">G-thinker: A User-Friendly Parallel Graph Mining System</a></span>
</div><!-- .site-info -->

</footer><!-- .site-footer -->
</div><!-- .site-inner -->
</div><!-- .site -->

<script type="text/javascript" src="lib/skip-link-focus-fix.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var screenReaderText = {"expand":"expand child menu","collapse":"collapse child menu"};
/* ]]> */
</script>
<script type="text/javascript" src="lib/functions.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
window.twttr=(function(w){t=w.twttr||{};t._e=[];t.ready=function(f){t._e.push(f);};return t;}(window));
/* ]]> */
</script>
<script type="text/javascript" id="twitter-wjs" async="" defer="" src="lib/widgets.js" charset="utf-8"></script>
<script type="text/javascript" src="lib/wp-embed.min.js"></script>

</body>
</html>